<?php

/**
 * Implements hook_theme().
 */
function wmcontroller_theme()
{
    return \Drupal::service('wmcontroller.service.templatelocator')->getThemes();
}

/**
 * Sets the variables set in a Controller
 *
 * @param $variables
 * @see \Drupal\wmcontroller\ViewBuilder\ViewBuilder::setData
 */
function wmcontroller_theme_set_variables(&$variables)
{
    // Skip if no data is set or not set as an array
    if (!isset($variables['_data']) || !is_array($variables['_data'])) {
        return;
    }
    $variables = array_merge($variables, $variables['_data']);
    unset($variables['_data']);
}